{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Prompt Enricher - Back-End","text":"<p>Este projeto \u00e9 respons\u00e1vel pelo back-end da aplica\u00e7\u00e3o Prompt Enricher, um sistema desenvolvido para enriquecer prompts utilizando t\u00e9cnicas de Processamento de Linguagem Natural (PLN), Expans\u00e3o de Consultas e Ontologias.</p>"},{"location":"#funcionalidades-principais","title":"Funcionalidades principais","text":"<ul> <li>Processamento de prompts enviados por usu\u00e1rios</li> <li>Expans\u00e3o sem\u00e2ntica com base em ontologias</li> <li>Gera\u00e7\u00e3o de prompts otimizados para IAs generativas</li> </ul>"},{"location":"#tecnologias","title":"Tecnologias","text":"<ul> <li>Python 3.x</li> <li>FastAPI</li> <li>Uvicorn</li> <li>OwlReady2</li> <li>Transformers</li> <li>SentenceTransformers</li> <li>Spacy</li> <li>MkDocs (documenta\u00e7\u00e3o)</li> </ul>"},{"location":"api/","title":"Endpoints da API","text":""},{"location":"api/#post-enrich_prompt","title":"<code>POST /enrich_prompt</code>","text":"<p>Esse endpoint recebe um prompt enviado pelo usu\u00e1rio e aplica uma s\u00e9rie de t\u00e9cnicas de enriquecimento sem\u00e2ntico baseadas em ontologias e extra\u00e7\u00e3o de termos-chave, com n\u00edveis vari\u00e1veis de precis\u00e3o sem\u00e2ntica.</p>"},{"location":"api/#requisicao","title":"\ud83d\udce5 Requisi\u00e7\u00e3o","text":"<p>M\u00e9todo: <code>POST</code> URL: <code>/enrich_prompt</code> Content-Type: <code>application/json</code></p>"},{"location":"api/#corpo-da-requisicao","title":"\ud83d\udd39 Corpo da requisi\u00e7\u00e3o:","text":"Campo Tipo Descri\u00e7\u00e3o <code>prompt</code> string Texto enviado pelo usu\u00e1rio a ser enriquecido <code>precision</code> string N\u00edvel de precis\u00e3o sem\u00e2ntica desejado: <code>very_low_precision</code>, <code>low_precision</code>, <code>medium_precision</code>, <code>high_precision</code>, ou <code>very_high_precision</code>"},{"location":"api/#exemplo","title":"Exemplo:","text":"<pre><code>{\n  \"prompt\": \"How can someone cope with sadness after a significant loss?\",\n  \"precision\": \"medium_precision\"\n}\n</code></pre>"},{"location":"api/#resposta","title":"\ud83d\udce4 Resposta","text":"<p>A resposta varia de acordo com o sucesso ou n\u00e3o do enriquecimento.</p>"},{"location":"api/#exemplo-de-resposta-com-sucesso","title":"\u2705 Exemplo de resposta com sucesso:","text":"<pre><code>{\n  \"Status\": \"Prompt enriched!\",\n  \"Message\": \"The ontology matches were relevant enough for enrichment!\",\n  \"Original Prompt\": \"How can someone cope with sadness after a significant loss?\",\n  \"Enriched Prompt\": \"How can someone cope with sadness after a significant loss? The relationship between sadness and grief might offer new perspectives. Altogether, these relationships could enrich our understanding of the underlying concepts.\",\n  \"Threshold used\": 0.6,\n  \"Precision level used\": \"medium_precision\",\n  \"Key terms\": [\"loss\", \"significant\", \"cope\", \"sadness\"],\n  \"Ontology matches\": {\n    \"loss\": [\n      {\n        \"identifier\": \"MFOEM_000106\",\n        \"label\": \"appraisal of loss\",\n        \"parents\": [\n          {\n            \"term\": \"appraisal\",\n            \"similarity\": 0.03448363021016121\n          }\n        ],\n        \"children\": [],\n        \"siblings\": [\n          {\n            \"term\": \"appraisal of suddenness\",\n            \"similarity\": 0.1623242348432541\n          }\n        ],\n        \"ancestors\": [\n          {\n            \"term\": \"representation\",\n            \"similarity\": 0.008483306504786015\n          }\n        ]\n      }\n    ],\n    \"significant\": [],\n    \"cope\": [],\n    \"sadness\": [\n      {\n        \"identifier\": \"MFOEM_000056\",\n        \"label\": \"sadness\",\n        \"parents\": [\n          {\n            \"term\": \"emotion process\",\n            \"similarity\": 0.24776813387870789\n          }\n        ],\n        \"children\": [],\n        \"siblings\": [\n          {\n            \"term\": \"anger\",\n            \"similarity\": 0.16203878819942474\n          }\n        ],\n        \"ancestors\": [\n          {\n            \"term\": \"emotion process\",\n            \"similarity\": 0.24776813387870789\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"api/#exemplo-de-resposta-sem-enriquecimento","title":"\u274c Exemplo de resposta sem enriquecimento:","text":"<pre><code>{\n  \"Status\": \"Prompt not enriched!\",\n  \"Message\": \"The ontology matches were not relevant enough for enrichment!\",\n  \"Original Prompt\": \"How can someone cope with sadness after a significant loss?\",\n  \"Enriched Prompt\": \"How can someone cope with sadness after a significant loss?\",\n  \"Threshold used\": null,\n  \"Precision level used\": \"very_high_precision\",\n  \"Key terms\": [\"loss\", \"significant\", \"cope\", \"sadness\"],\n  \"Ontology matches\": {\n    \"loss\": [\n      {\n        \"identifier\": \"MFOEM_000106\",\n        \"label\": \"appraisal of loss\",\n        \"parents\": [\n          {\n            \"term\": \"appraisal\",\n            \"similarity\": 0.03448363021016121\n          }\n        ],\n        \"children\": [],\n        \"siblings\": [\n          {\n            \"term\": \"appraisal of suddenness\",\n            \"similarity\": 0.1623242348432541\n          }\n        ],\n        \"ancestors\": [\n          {\n            \"term\": \"representation\",\n            \"similarity\": 0.008483306504786015\n          }\n        ]\n      }\n    ],\n    \"significant\": [],\n    \"cope\": [],\n    \"sadness\": [\n      {\n        \"identifier\": \"MFOEM_000056\",\n        \"label\": \"sadness\",\n        \"parents\": [\n          {\n            \"term\": \"emotion process\",\n            \"similarity\": 0.24776813387870789\n          }\n        ],\n        \"children\": [],\n        \"siblings\": [\n          {\n            \"term\": \"anger\",\n            \"similarity\": 0.16203878819942474\n          }\n        ],\n        \"ancestors\": [\n          {\n            \"term\": \"emotion process\",\n            \"similarity\": 0.24776813387870789\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"api/#logica-interna-resumo-tecnico","title":"\u2699\ufe0f L\u00f3gica interna (resumo t\u00e9cnico)","text":"<ol> <li> <p>Extra\u00e7\u00e3o de termos-chave:    O servi\u00e7o analisa o prompt e extrai palavras relevantes.</p> </li> <li> <p>Consulta \u00e0 ontologia:    Para cada termo, busca conceitos relacionados na ontologia MFOEM, a Emotion Ontology, considerando a precis\u00e3o escolhida.</p> </li> <li> <p>Expans\u00e3o do prompt:    Se forem encontrados resultados relevantes, o prompt original \u00e9 reformulado para incluir essas informa\u00e7\u00f5es.</p> </li> <li> <p>Itera\u00e7\u00e3o por n\u00edveis de threshold:    A API tenta enriquecer o prompt usando os thresholds definidos para o n\u00edvel de precis\u00e3o. Se algum n\u00edvel for satisfat\u00f3rio, retorna o prompt enriquecido.</p> </li> </ol>"},{"location":"api/#possiveis-valores-de-precision","title":"\ud83c\udfaf Poss\u00edveis valores de <code>precision</code>","text":"N\u00edvel Thresholds usados <code>very_low_precision</code> <code>[0.2, 0.15, 0.1, 0.05]</code> <code>low_precision</code> <code>[0.4, 0.35, 0.3, 0.25]</code> <code>medium_precision</code> <code>[0.6, 0.55, 0.5, 0.45]</code> <code>high_precision</code> <code>[0.8, 0.75, 0.7, 0.65]</code> <code>very_high_precision</code> <code>[0.99, 0.95, 0.9, 0.85]</code>"},{"location":"api/#observacoes","title":"\ud83d\udccc Observa\u00e7\u00f5es","text":"<ul> <li>Se nenhum n\u00edvel de precis\u00e3o gerar um resultado considerado enriquecido, a resposta mant\u00e9m o prompt original.</li> <li>O enriquecimento \u00e9 orientado pela ontologia, o que garante alinhamento com conhecimento estruturado e atualizado.</li> </ul>"},{"location":"estrutura/","title":"Estrutura do Projeto","text":"<p>Esta se\u00e7\u00e3o descreve a organiza\u00e7\u00e3o do projeto de backend utilizado para o sistema de enriquecimento de prompts baseado em ontologias e linguagem natural.</p>"},{"location":"estrutura/#estrutura-de-diretorios","title":"\ud83d\udcc1 Estrutura de Diret\u00f3rios","text":"<pre><code>/public\n  \u2514\u2500\u2500 ontology/\n      \u2514\u2500\u2500 MFOEM.owl\n/src\n  \u2514\u2500\u2500 app/\n      \u251c\u2500\u2500 controller/\n      \u2502   \u2514\u2500\u2500 prompt_controller.py\n      \u251c\u2500\u2500 service/\n      \u2502   \u251c\u2500\u2500 new_content_service.py\n      \u2502   \u251c\u2500\u2500 ontology_service.py\n      \u2502   \u251c\u2500\u2500 prompt_service.py\n      \u2502   \u251c\u2500\u2500 similarity_service.py\n      \u2502   \u2514\u2500\u2500 text_processing_service.py\n      \u2514\u2500\u2500 main.py\nrequirements.txt\nREADME.md\n.gitignore\n</code></pre>"},{"location":"estrutura/#descricao-das-pastas-e-arquivos","title":"\ud83e\udded Descri\u00e7\u00e3o das Pastas e Arquivos","text":""},{"location":"estrutura/#publicontology","title":"<code>/public/ontology/</code>","text":"<ul> <li>MFOEM.owl: Arquivo de ontologia utilizado para enriquecer semanticamente os prompts. Essa ontologia cont\u00e9m conceitos e rela\u00e7\u00f5es estruturadas relevantes ao dom\u00ednio de interesse.</li> </ul>"},{"location":"estrutura/#srcapp","title":"<code>/src/app/</code>","text":""},{"location":"estrutura/#mainpy","title":"\ud83d\udd39 <code>main.py</code>","text":"<ul> <li>Ponto de entrada da aplica\u00e7\u00e3o FastAPI. Respons\u00e1vel por inicializar a API, importar as rotas e configurar o servidor.</li> </ul>"},{"location":"estrutura/#controllerprompt_controllerpy","title":"\ud83d\udd39 <code>/controller/prompt_controller.py</code>","text":"<ul> <li>Define os endpoints da aplica\u00e7\u00e3o. No momento, possui o endpoint <code>POST /enrich_prompt</code>, que processa o prompt enviado e retorna o resultado enriquecido.</li> </ul>"},{"location":"estrutura/#service","title":"\ud83d\udd39 <code>/service/</code>","text":"<p>Cont\u00e9m os servi\u00e7os respons\u00e1veis pela l\u00f3gica de neg\u00f3cio do sistema:</p> <ul> <li><code>new_content_service.py</code>: Respons\u00e1vel por montar o novo prompt com base nos termos encontrados na ontologia.</li> <li><code>ontology_service.py</code>: Realiza a consulta \u00e0 ontologia, buscando termos semelhantes aos extra\u00eddos do prompt.</li> <li><code>prompt_service.py</code>: Servi\u00e7o principal que orquestra todo o processo de enriquecimento, desde a extra\u00e7\u00e3o de termos at\u00e9 o retorno do novo prompt.</li> <li><code>similarity_service.py</code>: Implementa fun\u00e7\u00f5es de similaridade sem\u00e2ntica entre termos, utilizada para validar os conceitos da ontologia.</li> <li><code>text_processing_service.py</code>: Respons\u00e1vel por pr\u00e9-processar o prompt e extrair os termos-chave para busca sem\u00e2ntica.</li> </ul>"},{"location":"estrutura/#arquivos-na-raiz","title":"\ud83d\udcc4 Arquivos na raiz","text":"<ul> <li> <p><code>requirements.txt</code>: Lista as depend\u00eancias do projeto. Pode ser utilizado para instala\u00e7\u00e3o com <code>pip install -r requirements.txt</code>.</p> </li> <li> <p><code>README.md</code>: Documento com instru\u00e7\u00f5es iniciais do projeto.</p> </li> <li> <p><code>.gitignore</code>: Define arquivos e pastas que devem ser ignorados pelo Git, como ambientes virtuais, arquivos tempor\u00e1rios etc.</p> </li> </ul>"},{"location":"estrutura/#consideracoes","title":"\u2705 Considera\u00e7\u00f5es","text":"<p>A estrutura do projeto segue boas pr\u00e1ticas de separa\u00e7\u00e3o de responsabilidades, com m\u00f3dulos bem definidos para controle, l\u00f3gica de neg\u00f3cio e manipula\u00e7\u00e3o de dados. Essa organiza\u00e7\u00e3o facilita a manuten\u00e7\u00e3o, testes e extens\u00e3o do sistema.</p>"},{"location":"instalacao/","title":"Guia de Instala\u00e7\u00e3o","text":"<p>Este documento descreve os passos necess\u00e1rios para configurar e executar o projeto Prompt Enricher Backend localmente.</p>"},{"location":"instalacao/#requisitos","title":"Requisitos","text":"<ul> <li>Python 3.11.9</li> <li><code>virtualenv</code> instalado</li> <li>Terminal Bash (para comandos de desenvolvimento)</li> <li>Terminal PowerShell (para comandos Git, conforme prefer\u00eancias do projeto)</li> </ul>"},{"location":"instalacao/#passo-a-passo","title":"Passo a Passo","text":""},{"location":"instalacao/#1-criar-e-ativar-o-ambiente-virtual","title":"1. Criar e ativar o ambiente virtual","text":"<p>Caso ainda n\u00e3o exista um ambiente virtual criado:</p> <pre><code>python -m venv venv\n</code></pre> <p>Ative o ambiente virtual:</p> <pre><code>source venv/Scripts/activate\n</code></pre>"},{"location":"instalacao/#2-instalar-dependencias","title":"2. Instalar depend\u00eancias","text":"<p>Com o ambiente virtual ativado, instale as depend\u00eancias do projeto:</p> <pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"instalacao/#3-executar-o-servidor-localmente","title":"3. Executar o servidor localmente","text":"<p>Utilize o seguinte comando para iniciar o servidor FastAPI:</p> <pre><code>PYTHONPATH=src uvicorn src.app.main:app --host localhost --reload\n</code></pre> <p>Observa\u00e7\u00f5es sobre o comando acima:</p> <ul> <li><code>host localhost</code>: Define o endere\u00e7o do servidor como <code>localhost</code>.</li> <li><code>reload</code>: Habilita o recarregamento autom\u00e1tico sempre que o c\u00f3digo for alterado.</li> </ul>"},{"location":"instalacao/#4-acessar-a-aplicacao","title":"4. Acessar a aplica\u00e7\u00e3o","text":"<p>Ap\u00f3s iniciar o servidor, acesse:</p> <ul> <li>API principal: http://localhost:8000/</li> </ul>"},{"location":"instalacao/#dicas-de-desenvolvimento","title":"Dicas de Desenvolvimento","text":"<ul> <li>Use o terminal bash para comandos relacionados ao ambiente Python e execu\u00e7\u00e3o do servidor.</li> <li>Use o PowerShell para comandos Git.</li> <li>Sempre que adicionar bibliotecas novas, atualize o arquivo <code>requirements.txt</code> com:</li> </ul> <pre><code>pip freeze &gt; requirements.txt\n</code></pre>"},{"location":"servicos/","title":"Servi\u00e7os","text":"<p>Esta se\u00e7\u00e3o descreve os servi\u00e7os utilizados no backend do Prompt Enricher. Cada servi\u00e7o \u00e9 respons\u00e1vel por uma parte espec\u00edfica do processo de enriquecimento de prompts, desde o processamento textual at\u00e9 a consulta e expans\u00e3o com base em ontologias.</p>"},{"location":"servicos/#new_content_servicepy","title":"<code>new_content_service.py</code>","text":"<p>Este m\u00f3dulo \u00e9 respons\u00e1vel por gerar frases din\u00e2micas que expandem o prompt original com base em relacionamentos ontol\u00f3gicos.</p>"},{"location":"servicos/#funcoes","title":"Fun\u00e7\u00f5es:","text":"<ul> <li> <p><code>expand_prompt(original_prompt, ontology_matches, key_terms, threshold)</code>   Expande o prompt original gerando frases adicionais baseadas em relacionamentos ontol\u00f3gicos relevantes.</p> </li> <li> <p><code>generate_dynamic_phrase(term_a, related_terms, relationship)</code>   Gera uma frase descritiva baseada no relacionamento entre um termo principal e seus termos relacionados.</p> </li> <li> <p><code>pick_relationship_for_type(relation_type)</code>   Seleciona dinamicamente um tipo de relacionamento textual com base no tipo de rela\u00e7\u00e3o ontol\u00f3gica (pais, filhos, irm\u00e3os, etc.).</p> </li> </ul>"},{"location":"servicos/#ontology_servicepy","title":"<code>ontology_service.py</code>","text":"<p>Respons\u00e1vel pela consulta \u00e0 ontologia OWL e obten\u00e7\u00e3o de informa\u00e7\u00f5es hier\u00e1rquicas (pais, filhos, irm\u00e3os, ancestrais) sobre os termos.</p>"},{"location":"servicos/#funcoes_1","title":"Fun\u00e7\u00f5es:","text":"<ul> <li> <p><code>search_ontology(term, key_terms, threshold, prompt)</code>   Pesquisa entidades na ontologia relacionadas ao termo fornecido e as filtra com base na relev\u00e2ncia sem\u00e2ntica.</p> </li> <li> <p><code>get_entity_parents(entity)</code>   Recupera os r\u00f3tulos das entidades \"pais\" de uma entidade ontol\u00f3gica.</p> </li> <li> <p><code>get_entity_children(entity)</code>   Recupera os r\u00f3tulos das entidades \"filhos\".</p> </li> <li> <p><code>get_entity_siblings(entity)</code>   Recupera os r\u00f3tulos das entidades \"irm\u00e3s\".</p> </li> <li> <p><code>get_entity_ancestors(entity)</code>   Recupera os r\u00f3tulos das entidades \"ancestrais\", removendo duplicatas.</p> </li> </ul>"},{"location":"servicos/#prompt_servicepy","title":"<code>prompt_service.py</code>","text":"<p>Camada principal de orquestra\u00e7\u00e3o do enriquecimento do prompt, integrando os demais servi\u00e7os.</p>"},{"location":"servicos/#funcoes_2","title":"Fun\u00e7\u00f5es:","text":"<p><code>enrich_prompt(promptRequest: PromptRequest)</code>  Realiza o processo completo de enriquecimento:</p> <ol> <li>Extrai termos-chave do prompt.</li> <li>Pesquisa por correspond\u00eancias ontol\u00f3gicas relevantes com base em diferentes limiares de similaridade.</li> <li>Expande o prompt com base nas entidades encontradas.</li> <li>Retorna o prompt enriquecido, juntamente com detalhes do processo.</li> </ol>"},{"location":"servicos/#similarity_servicepy","title":"<code>similarity_service.py</code>","text":"<p>Este m\u00f3dulo \u00e9 respons\u00e1vel por calcular a similaridade sem\u00e2ntica entre os termos do prompt e os r\u00f3tulos da ontologia.</p>"},{"location":"servicos/#funcoes_3","title":"Fun\u00e7\u00f5es:","text":"<ul> <li> <p><code>compute_similarity(term, label)</code>   Calcula a similaridade de cosseno entre embeddings de um termo e um r\u00f3tulo.</p> </li> <li> <p><code>filter_relevant_terms(similarity_dicts, threshold)</code>   Filtra os termos mais relevantes com base no limiar de similaridade.</p> </li> <li> <p><code>is_prompt_related(label, key_terms, threshold)</code>   Verifica se um r\u00f3tulo da ontologia \u00e9 semanticamente relevante para os termos do prompt.</p> </li> </ul>"},{"location":"servicos/#text_processing_servicepy","title":"<code>text_processing_service.py</code>","text":"<p>Realiza o processamento lingu\u00edstico do prompt original para extrair os termos mais significativos.</p>"},{"location":"servicos/#funcoes_4","title":"Fun\u00e7\u00f5es:","text":"<p><code>extract_key_terms(prompt)</code>  Extrai e lematiza os termos-chave do prompt (substantivos, adjetivos e verbos) com base em an\u00e1lise gramatical.</p>"}]}